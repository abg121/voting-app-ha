# Basic settings
listen_addresses = '*'
port = 5432
socket_dir = '/var/run/pgpool'

# Connection pooling
num_init_children = 100
max_pool = 4

# Backend configuration
backend_hostname0 = 'postgres-primary'
backend_port0 = 5432
backend_weight0 = 1
backend_data_directory0 = '/var/lib/postgresql/data'
backend_flag0 = 'ALWAYS_PRIMARY'

backend_hostname1 = 'postgres-replica1'
backend_port1 = 5432
backend_weight1 = 1
backend_data_directory1 = '/var/lib/postgresql/data'
backend_flag1 = ''

backend_hostname2 = 'postgres-replica2'
backend_port2 = 5432
backend_weight2 = 1
backend_data_directory2 = '/var/lib/postgresql/data'
backend_flag2 = ''

# Load balancing
load_balance_mode = on
ignore_leading_white_space = on
white_function_list = ''
black_function_list = 'currval,lastval,nextval,setval'

# Failover (disabled for stability)
failover_on_backend_error = off

# Health checks
health_check_period = 10
health_check_timeout = 20
health_check_user = 'postgres'
health_check_password = 'postgres'

# Master-slave mode
master_slave_mode = on
master_slave_sub_mode = 'stream'

# Logging
log_connections = off
log_statement = off
log_per_node_statement = off
